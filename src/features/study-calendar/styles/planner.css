.calendar { width: 18%; height: auto; position: fixed; top: 14%; left: 1%; z-index: 9998; border: 1px solid hsl(var(--foreground) / 0.2); border-radius: 10px; background: hsl(var(--card)); color: hsl(var(--foreground)); box-shadow: var(--shadow-soft); }
.calendar-header { display: flex; align-items: center; justify-content: space-between; padding: 10px; font-family: "Bree Serif", serif; color: hsl(var(--foreground)); }
.calendar-arrow { background: none; border: none; color: hsl(var(--foreground)); }
.calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; padding: 10px; }
.calendar-day { text-align: center; padding: 6px 0; border-radius: 6px; cursor: pointer; color: hsl(var(--foreground)); }
.calendar-day:hover { background: hsl(var(--brand-2) / 0.25); }
.calendar-day.accent { background: hsl(var(--brand-1) / 0.85); color: hsl(var(--background)); }
.calendar-day.highlight { background: hsl(var(--brand-2) / 0.18); }
.calendar-day.previous-month, .calendar-day.next-month { color: hsl(var(--foreground) / 0.45); }

.tabs-container { position: absolute; top: 13.5%; left: 33.58%; width: 77.5%; display: flex; justify-content: space-between; z-index: 0; }
.tabs { position: absolute; transform: translateX(-50%); color: hsl(var(--foreground)); font-family: "Bree Serif", serif; }

.schedule-container { width: 77.5%; height: 82.5%; overflow-y: scroll; display: flex; flex-direction: column; border: 1px solid hsl(var(--foreground) / 0.2); border-radius: 10px; scrollbar-width: none; box-shadow: var(--shadow-soft); background-color: hsl(var(--card)); left: 21.25%; top: 14.5%; position: absolute; z-index: 1; }
.time-slot { flex: 0 0 calc(100% / 10); border-bottom: 1px solid hsl(var(--foreground) / 0.12); display: flex; align-items: center; padding: 0 1rem; font-family: "Bree Serif", serif; color: hsl(var(--foreground)); }
.time-slot .period { font-size: 0.75rem; margin-left: 0.25rem; }
.current-time-line { position: absolute; left: 0; right: 0; height: 2px; background-color: hsl(var(--brand-1)); z-index: 2; }
.time-slot:last-child { border-bottom: none; }

.task { position: absolute; border: 2px solid; box-sizing: border-box; width: 91.67%; border-radius: 8px; font-family: "Bree Serif", serif; left: 7.82%; z-index: 5; display: flex; justify-content: center; align-items: center; text-align: center; color: hsl(var(--foreground)); backdrop-filter: blur(6px); }
.complete-task-button { position: absolute; left: 4px; top: 4px; background: hsl(var(--background)); color: hsl(var(--foreground)); border: 1px solid hsl(var(--foreground) / 0.2); border-radius: 4px; padding: 2px 4px; cursor: pointer; }

.week-divider { position: absolute; top: 0; bottom: 0; width: 1px; background-color: hsl(var(--foreground) / 0.2); z-index: 1; }

.time-left-widget { position: absolute; left: 1%; top: 75%; width: 18%; padding: 0.75rem; border-radius: 10px; border: 1px solid hsl(var(--foreground) / 0.2); background: hsl(var(--card)); box-shadow: var(--shadow-soft); z-index: 9998; }
.time-bar { display: flex; align-items: center; gap: 0.5rem; color: hsl(var(--foreground)); }
.bar { flex-grow: 1; height: 0.75rem; background-color: hsl(var(--foreground) / 0.15); border-radius: 9999px; overflow: hidden; }
.fill { height: 100%; background-image: linear-gradient(90deg, hsl(var(--brand-2)), hsl(var(--brand-1))); border-radius: inherit; transition: width 0.4s ease; }

.planner-header { position: relative; left: 21.25%; top: 10%; width: 77.5%; display: grid; grid-template-columns: 1fr auto auto; align-items: center; gap: 1rem; color: hsl(var(--foreground)); }
.planner-title { font-size: 1.75rem; font-weight: 600; }
.planner-controls { display: flex; align-items: center; gap: 0.5rem; }
.planner-select, .planner-today { padding: 0.4rem 0.75rem; border-radius: 8px; border: 1px solid hsl(var(--foreground) / 0.2); background: hsl(var(--card)); color: hsl(var(--foreground)); box-shadow: var(--shadow-soft); }
.planner-new { padding: 0.5rem 1rem; border-radius: 9999px; border: 1px solid hsl(var(--foreground) / 0.2); background: linear-gradient(145deg, hsl(var(--brand-1) / 0.15), hsl(var(--brand-2) / 0.12)); color: hsl(var(--foreground)); box-shadow: var(--shadow-soft); }

/* Modal overlay and popup */
.blur-background {
	position: fixed;
	inset: 0;
	background: rgba(0, 0, 0, 0.35);
	backdrop-filter: blur(4px);
	z-index: 10000; /* higher than calendar/time-left (9998) */
	display: flex;
	align-items: center;
	justify-content: center;
	padding: 1rem;
}

.popup {
	position: relative;
	background: hsl(var(--card));
	color: hsl(var(--foreground));
	border: 1px solid hsl(var(--foreground) / 0.12);
	border-radius: 12px;
	box-shadow: 0 20px 50px rgba(0,0,0,0.35), 0 10px 20px rgba(0,0,0,0.2);
	max-width: 92vw;
	max-height: 92vh;
	overflow: auto;
	z-index: 10001;
}

/* Force the AI popup to be a square centered modal */
.popup.task-popup {
	width: min(520px, 92vw);
	height: min(520px, 92vh);
}

/* Modal layout polish */
.modal-header { display:flex; align-items:center; justify-content:space-between; gap:0.75rem; margin-bottom:0.5rem; }
.modal-title { font-size:1.125rem; font-weight:600; }
.modal-footer button { min-width: 96px; }
