/* Entire legacy file replaced by modern aesthetic; see new definitions below */
@media (prefers-reduced-motion: reduce) { .calendar *, .schedule-container *, .planner-new, .planner-today, .task { transition: none !important; animation: none !important; } }

/* Calendar */
.calendar { width: 18%; position: fixed; top: 14%; left: 1%; z-index: 9998; border: 1px solid hsl(var(--border) / 0.6); border-radius: 16px; background: var(--gradient-surface); color: hsl(var(--foreground)); box-shadow: var(--shadow-soft); font-family:'Sen',sans-serif; }
.calendar-header { display: flex; align-items: center; justify-content: space-between; padding: 14px 16px 8px; font-weight: 600; font-size: .95rem; letter-spacing:.5px; color: hsl(var(--foreground)); font-family:'Sen',sans-serif; }
.calendar-arrow { background: none; border: none; color: hsl(var(--foreground) / 0.8); padding:4px; border-radius:8px; cursor:pointer; transition: background .25s, color .25s; }
.calendar-arrow:hover { background:hsl(var(--foreground) / 0.12); color:hsl(var(--foreground)); }
.calendar-arrow:focus-visible { outline:3px solid hsl(var(--primary)); outline-offset:2px; }
.calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 6px; padding: 8px 14px 16px; }
.calendar-day { text-align: center; padding: 6px 0; border-radius: 10px; cursor: pointer; font-size:.8rem; font-weight:500; line-height:1.2; color: hsl(var(--foreground) / 0.85); position:relative; transition: background .35s, color .35s, transform .35s; font-family:'Sen',sans-serif; }
.calendar-day:hover { background: hsl(var(--primary) / 0.18); }
.calendar-day:focus-visible { outline:3px solid hsl(var(--primary)); outline-offset:2px; }
.calendar-day.accent { background: linear-gradient(145deg,hsl(var(--primary)),hsl(var(--accent))); color: #fff; font-weight:600; box-shadow:0 4px 10px -2px hsl(var(--primary) / 0.5); }
.calendar-day.accent:hover { background: linear-gradient(145deg,hsl(var(--primary) / 0.9),hsl(var(--accent) / 0.95)); }
.calendar-day.highlight:not(.accent) { background: hsl(var(--primary) / 0.12); color:hsl(var(--primary) / 1); }
.calendar-day.previous-month, .calendar-day.next-month { color: hsl(var(--foreground) / 0.35); }
.calendar-day.previous-month:hover, .calendar-day.next-month:hover { background:hsl(var(--primary) / 0.1); }
.calendar-day.accent::after { content:""; position:absolute; inset:-2px; border-radius:12px; border:2px solid hsl(var(--foreground) / 0.3); pointer-events:none; }

/* Week tabs */
.tabs-container { position: absolute; top: 13.5%; left: 33.58%; width: 77.5%; display: flex; justify-content: space-between; z-index: 0; }
.tabs { position: absolute; transform: translateX(-50%); color: hsl(var(--foreground)); font-family: "Bree Serif", serif; }

/* Schedule */
.schedule-container { width: 77.5%; height: 82.5%; overflow-y: scroll; display: flex; flex-direction: column; border: 1px solid hsl(var(--border) / 0.6); border-radius: 24px; scrollbar-width: none; box-shadow: var(--shadow-soft); background: var(--gradient-surface); left: 21.25%; top: 14.5%; position: absolute; z-index: 1; backdrop-filter: saturate(130%) blur(2px); font-family:'Sen',sans-serif; }
.schedule-container::-webkit-scrollbar { width: 0; height:0; }
.time-slot { flex: 0 0 calc(100% / 10); border-bottom: 1px solid hsl(var(--foreground) / 0.12); display: flex; align-items: center; padding: 0 .95rem; font-family:'Sen',Helvetica,Arial,sans-serif; font-weight:500; color: hsl(var(--foreground) / 0.72); font-size:.76rem; letter-spacing:.25px; }
.time-slot .period { font-size: 0.75rem; margin-left: 0.25rem; }
.current-time-line { position: absolute; left: 0; right: 0; height: 2px; background: linear-gradient(90deg,hsl(var(--primary)),hsl(var(--accent))); z-index: 2; box-shadow:0 0 0 1px hsl(var(--primary) / 0.4),0 0 10px -2px hsl(var(--primary) / 0.6); }
.time-slot:last-child { border-bottom: none; }

/* Mobile-only variable-based timeline for Day view */

@media (max-width:900px) {
	:root { --hour-height: 72px; --time-gutter: 4.05rem; }
	.schedule-container.mobile.day-view { position: relative; overflow-y:auto; /* remove padding-left so gutter is free */ padding:0 0.75rem 0 0; scrollbar-width: none; }
	.schedule-container.mobile.day-view::-webkit-scrollbar { width:0; height:0; }
	/* Timeline + time gutter */
	.timeline { position:absolute; inset:0 0 0 0; pointer-events:none; }
	.timeline-row { position:relative; height: var(--hour-height); display:flex; align-items:flex-start; }
	/* Visible time gutter using absolute labels area */
	.tl-label { position:absolute; left:0; width:calc(var(--time-gutter) - 0.4rem); text-align:right; padding-right:.4rem; top:4px; font-size:.62rem; font-weight:600; letter-spacing:.5px; color:hsl(var(--foreground)/0.55); text-transform:lowercase; z-index:6; }
	/* Add faint vertical separator for gutter */
	.timeline-row::before { content:""; position:absolute; left:0; top:0; bottom:0; width:1px; background:hsl(var(--foreground)/0.15); }
	.tl-label .period { font-size:.55rem; margin-left:2px; opacity:.6; }
	.tl-line { position:absolute; left:0; right:0; top:0; height:1px; background:hsl(var(--foreground)/0.14); }
	.now-marker { position:absolute; left:0; right:0; height:2px; background:linear-gradient(90deg,hsl(var(--primary)),hsl(var(--accent))); box-shadow:0 0 0 1px hsl(var(--primary)/0.4),0 0 10px -2px hsl(var(--primary)/0.6); z-index:6; }
	/* Mobile striped task - higher specificity so it beats .task */
	.schedule-container.mobile.day-view .task.task-day { position:absolute; left:var(--time-gutter); right:0.35rem; width:auto; display:flex; justify-content:center; align-items:center; text-align:center; padding:.45rem .65rem; font-size:.68rem; }
	/* (Removed duplicate padding-left override to preserve gutter) */
}
@media (max-width:520px) { :root { --hour-height: 64px; } .task-day { font-size:.62rem; } }

/* Tasks */
.task { position: absolute; border: 1.5px solid hsl(var(--primary) / 0.4); box-sizing: border-box; width: 91.67%; border-radius: 14px; font-family:'Sen',Helvetica,Arial,sans-serif; font-weight:600; left: 7.82%; z-index: 5; display: flex; justify-content: center; align-items: center; text-align: center; color: hsl(var(--foreground)); backdrop-filter: blur(10px); background: linear-gradient(145deg,hsl(var(--primary) / 0.18),hsl(var(--accent) / 0.18)); font-size:.73rem; line-height:1.2; padding: .3rem .55rem; box-shadow:0 4px 14px -4px hsl(var(--primary) / 0.5), 0 2px 6px hsl(var(--primary) / 0.25); transition: transform .4s cubic-bezier(.22,1,.36,1), box-shadow .4s, background .4s; letter-spacing:.3px; }
.task:hover { transform: translateY(-2px) scale(1.02); box-shadow:0 10px 32px -8px hsl(var(--primary) / 0.55), 0 4px 10px hsl(var(--primary) / 0.35); background: linear-gradient(145deg,hsl(var(--primary) / 0.28),hsl(var(--accent) / 0.25)); }
.task:focus-visible { outline:3px solid #6366f1; outline-offset:2px; }
.complete-task-button { position: absolute; left: 6px; top: 6px; background: hsl(var(--background)); color: hsl(var(--foreground) / 0.8); border: 1px solid hsl(var(--foreground) / 0.25); border-radius: 6px; padding: 2px 6px; cursor: pointer; font-size:.63rem; font-weight:600; line-height:1; transition: background .25s, color .25s, transform .25s; font-family:inherit; }
.complete-task-button:hover { background:hsl(var(--primary)); color:hsl(var(--foreground)); }
.complete-task-button:focus-visible { outline:2px solid #6366f1; outline-offset:2px; }
.week-divider { position: absolute; top: 0; bottom: 0; width: 1px; background-color: hsl(var(--foreground) / 0.2); z-index: 1; }

/* Time left widget */
.time-left-widget { position: absolute; left: 1%; top: 75%; width: 18%; padding: 0.9rem .95rem 1rem; border-radius: 16px; border: 1px solid hsl(var(--border) / 0.6); background: var(--gradient-surface); box-shadow: var(--shadow-soft); z-index: 9998; display:flex; flex-direction:column; gap:.65rem; font-family:'Sen',sans-serif; }
.time-left-widget h4 { font-size:.8rem; font-weight:600; letter-spacing:.5px; color:#0f172a; }
.time-bar { display: flex; align-items: center; gap: 0.65rem; color: hsl(var(--foreground) / 0.7); font-size:.65rem; font-weight:500; font-family:'Sen',sans-serif; }
.bar { flex-grow: 1; height: 0.55rem; background: hsl(var(--foreground) / 0.15); border-radius: 9999px; overflow: hidden; position:relative; }
.fill { height: 100%; background-image: linear-gradient(90deg,hsl(var(--primary)),hsl(var(--accent))); border-radius: inherit; transition: width 0.6s cubic-bezier(.65,.05,.36,1); box-shadow:0 0 0 1px hsl(var(--primary)/0.25), 0 4px 10px -2px hsl(var(--primary)/0.45); }

/* Header controls */
.planner-header { position: relative; left: 21.25%; top: 10%; width: 77.5%; display: grid; grid-template-columns: 1fr auto auto; align-items: center; gap: 1rem; color: hsl(var(--foreground)); padding: .65rem 1rem; font-family:'Sen',sans-serif; }
.planner-title { font-size: 1.9rem; font-weight: 600; letter-spacing:.5px; background: linear-gradient(90deg,hsl(var(--foreground)),hsl(var(--primary))); -webkit-background-clip:text; background-clip:text; color:transparent; font-family:'Sen',sans-serif; }
.planner-controls { display: flex; align-items: center; gap: 0.55rem; }
.planner-select, .planner-today { padding: 0.5rem .85rem; border-radius: 12px; border: 1px solid hsl(var(--border)); background: hsl(var(--card)); color: hsl(var(--foreground)); box-shadow: var(--shadow-soft); font-size:.75rem; backdrop-filter: blur(2px); transition: background .35s, transform .35s, border-color .35s; font-family:'Sen',sans-serif; }
.planner-select:hover, .planner-today:hover { background: hsl(var(--card) / 0.9); transform: translateY(-1px); border-color: hsl(var(--primary)); }
.planner-select:focus-visible, .planner-today:focus-visible { outline:3px solid hsl(var(--primary)); outline-offset:2px; }
.planner-new { padding: .65rem 1.25rem; border-radius: 9999px; border: 1px solid hsl(var(--primary) / 0.6); background: linear-gradient(145deg,hsl(var(--primary) / 0.2),hsl(var(--primary) / 0.05)); color: hsl(var(--foreground)); font-weight:600; font-size:.75rem; letter-spacing:.5px; box-shadow: var(--shadow-soft); backdrop-filter: blur(2px); transition: transform .5s cubic-bezier(.22,1,.36,1), box-shadow .5s, background .5s; font-family:'Sen',sans-serif; }
.planner-new:hover { transform: translateY(-2px) scale(1.03); box-shadow: var(--glow); background: linear-gradient(145deg,hsl(var(--primary) / 0.35),hsl(var(--primary) / 0.15)); }
.planner-new:focus-visible { outline:3px solid hsl(var(--primary)); outline-offset:2px; }

/* Action buttons grouping */
.planner-actions { display:flex; align-items:center; gap:.6rem; }
@media (max-width:900px) { .planner-actions { order:3; } }

/* Removed light/dark divergence: app uses unified dark theme tokens */

/* Modal overlay */
.blur-background { position: fixed; inset: 0; background: rgba(0, 0, 0, 0.35); backdrop-filter: blur(4px); z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 1rem; }
.popup { position: relative; background: var(--gradient-surface); color: hsl(var(--foreground)); border: 1px solid hsl(var(--border)); border-radius: 24px; box-shadow: var(--shadow-soft); max-width: 92vw; max-height: 92vh; overflow: auto; z-index: 10001; padding: .75rem 1rem 1rem; animation: popup-enter .55s cubic-bezier(.22,1,.36,1); font-family:'Sen',sans-serif; }
.popup.task-popup { width: min(520px, 92vw); height: min(520px, 92vh); }
.modal-header { display:flex; align-items:center; justify-content:space-between; gap:0.75rem; margin-bottom:0.5rem; }
.modal-title { font-size:1.125rem; font-weight:600; }
.modal-footer button { min-width: 96px; }
@keyframes popup-enter { from { transform: translateY(18px) scale(.96); opacity:0; } to { transform: translateY(0) scale(1); opacity:1; } }

/* -------------------- Responsive (Portrait / Small Screens) -------------------- */
@media (max-width: 900px) {
	.planner-root { padding: 0.75rem 0.85rem 5rem; display:flex; flex-direction:column; gap:0.9rem; }
	.planner-header { position: static; width: 100%; top: auto; left: auto; padding: 0.25rem 0.25rem 0.5rem; grid-template-columns: 1fr auto; gap:0.65rem; }
	.planner-title { font-size: clamp(1.25rem, 7vw, 1.8rem); }
	.planner-controls { order: 2; }
	.planner-new { order: 3; width: fit-content; }

	/* Calendar becomes collapsible block */
	.calendar { position: static; width: 100%; order: 4; margin-top: 0.25rem; transform-origin: top; }
	.mobile-cal-toggle-wrapper { width:100%; display:flex; justify-content:flex-start; }
	.mobile-cal-toggle { font-size: .7rem; }
	.mobile-calendar-wrapper { max-height:0; overflow:hidden; transition:max-height .45s cubic-bezier(.22,1,.36,1); }
	.mobile-calendar-wrapper.open { max-height:600px; }

	/* Schedule */
		.schedule-container { position: static; width: 100%; height: min(66vh, 640px); top:auto; left:auto; order:5; padding-left:0; }
	.time-slot { font-size: .65rem; padding: 0 .6rem; }
	.task { left: 4%; width: 92%; font-size: .62rem; }
	.complete-task-button { left:4px; top:4px; padding:2px 5px; }
	.current-time-line { box-shadow:none; }

	/* Time left widget moves to bottom sticky bar */
	.time-left-widget { position: fixed; left: 0; right: 0; bottom: 0; top: auto; width:100%; display:grid; grid-template-columns:repeat(auto-fit,minmax(120px,1fr)); gap:.75rem; border-radius:18px 18px 0 0; padding: .75rem .9rem .95rem; backdrop-filter: blur(8px) saturate(120%); z-index: 9999; }
	.time-left-widget h4 { font-size:.7rem; }
	.time-bar { font-size:.6rem; }

	/* Floating AI button reposition */
	.planner-new[style*="position: fixed"] { right: 1rem !important; bottom: 1rem !important; }

	/* Hide week dividers if week view gets cramped */
	.week-divider { display:none; }
}

@media (max-width: 520px) {
	.planner-root { padding-bottom:6.5rem; }
	.planner-title { letter-spacing:.25px; }
	.task { font-size:.58rem; }
	.planner-select, .planner-today { font-size:.65rem; padding:.45rem .65rem; }
	.planner-new { font-size:.65rem; padding:.5rem 1rem; }
	.calendar-day { font-size:.72rem; }
	.calendar-header { font-size:.8rem; }
}

/* Hide mobile calendar toggle on desktop */
@media (min-width: 901px) {
	.mobile-cal-toggle-wrapper, .mobile-cal-toggle { display: none !important; }
}
